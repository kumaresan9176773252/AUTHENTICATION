{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";axios.defaults.withCredentials=true;let firstRender=true;const Welcome=()=>{const[user,setUser]=useState();const refreshToken=async()=>{const res=await axios.get(\"https://authentication-backend-5h12.onrender.com/api/refresh\",{withCredentials:true}).catch(err=>console.log(err));const data=await res.data;return data;};const sendRequest=async()=>{const res=await axios.get('https://authentication-backend-5h12.onrender.com/api/user',{withCredentials:true}).catch(err=>console.log(err));const data=await res.data;return data;};useEffect(()=>{if(firstRender){firstRender=false;sendRequest().then(data=>setUser(data.user));}let interval=setInterval(()=>{refreshToken().then(data=>setUser(data.user));},1000*29);return()=>clearInterval(interval);},[]);return/*#__PURE__*/_jsx(\"div\",{children:user&&/*#__PURE__*/_jsx(\"h1\",{children:user.name})});};export default Welcome;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","defaults","withCredentials","firstRender","Welcome","user","setUser","refreshToken","res","get","catch","err","console","log","data","sendRequest","then","interval","setInterval","clearInterval","children","name"],"sources":["D:/web developer projects/MERN STACK project/AUTHENTICATION/frontend/src/components/Welcome.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\naxios.defaults.withCredentials = true;\r\nlet firstRender = true;\r\n\r\nconst Welcome = () => {\r\n  const [user, setUser] = useState();\r\n\r\n  const refreshToken = async () => {\r\n    const res = await axios.get(\"https://authentication-backend-5h12.onrender.com/api/refresh\", {\r\n      withCredentials: true\r\n    }).catch(err => console.log(err));\r\n    const data = await res.data;\r\n    return data;\r\n  }\r\n\r\n\r\n  const sendRequest = async () => {\r\n    const res = await axios.get('https://authentication-backend-5h12.onrender.com/api/user', {\r\n      withCredentials: true\r\n    }).catch(err => console.log(err));\r\n    const data = await res.data;\r\n    return data;\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (firstRender) {\r\n      firstRender = false\r\n      sendRequest().then((data) => setUser(data.user));\r\n    }\r\n    let interval = setInterval(() => {\r\n      refreshToken().then(data => setUser(data.user))\r\n    }, 1000 * 29)\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n  return (\r\n    <div>\r\n      {user && <h1>{user.name}</h1>}\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default Welcome;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAC1BF,KAAK,CAACG,QAAQ,CAACC,eAAe,CAAG,IAAI,CACrC,GAAI,CAAAC,WAAW,CAAG,IAAI,CAEtB,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,CACpB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGT,QAAQ,CAAC,CAAC,CAElC,KAAM,CAAAU,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAV,KAAK,CAACW,GAAG,CAAC,8DAA8D,CAAE,CAC1FP,eAAe,CAAE,IACnB,CAAC,CAAC,CAACQ,KAAK,CAACC,GAAG,EAAIC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC,CACjC,KAAM,CAAAG,IAAI,CAAG,KAAM,CAAAN,GAAG,CAACM,IAAI,CAC3B,MAAO,CAAAA,IAAI,CACb,CAAC,CAGD,KAAM,CAAAC,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,KAAM,CAAAP,GAAG,CAAG,KAAM,CAAAV,KAAK,CAACW,GAAG,CAAC,2DAA2D,CAAE,CACvFP,eAAe,CAAE,IACnB,CAAC,CAAC,CAACQ,KAAK,CAACC,GAAG,EAAIC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC,CACjC,KAAM,CAAAG,IAAI,CAAG,KAAM,CAAAN,GAAG,CAACM,IAAI,CAC3B,MAAO,CAAAA,IAAI,CACb,CAAC,CAEDlB,SAAS,CAAC,IAAM,CACd,GAAIO,WAAW,CAAE,CACfA,WAAW,CAAG,KAAK,CACnBY,WAAW,CAAC,CAAC,CAACC,IAAI,CAAEF,IAAI,EAAKR,OAAO,CAACQ,IAAI,CAACT,IAAI,CAAC,CAAC,CAClD,CACA,GAAI,CAAAY,QAAQ,CAAGC,WAAW,CAAC,IAAM,CAC/BX,YAAY,CAAC,CAAC,CAACS,IAAI,CAACF,IAAI,EAAIR,OAAO,CAACQ,IAAI,CAACT,IAAI,CAAC,CAAC,CACjD,CAAC,CAAE,IAAI,CAAG,EAAE,CAAC,CACb,MAAO,IAAMc,aAAa,CAACF,QAAQ,CAAC,CACtC,CAAC,CAAE,EAAE,CAAC,CACN,mBACEjB,IAAA,QAAAoB,QAAA,CACGf,IAAI,eAAIL,IAAA,OAAAoB,QAAA,CAAKf,IAAI,CAACgB,IAAI,CAAK,CAAC,CAC1B,CAAC,CAEV,CAAC,CAED,cAAe,CAAAjB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}